# SubDomainSiteScan 

Note: python 3.6

## 功能

对收集的子域名站点进行筛查，并进行分类，根据什么进行判读呢？

请求不存在的资源，若正常提示，则访问主页

（1）状态码：常见200/302/404

（2）标题：对比错误页面及主页的状态码或title内容是否一样（正常或不正常的资源请求）



## 难点

（1）现在主要是根据日常开发的处理思路进行判读，但是可能不能覆盖所有情况

（2）提升效率，使用多进程


## 调研统计
（1）打算对现存活网站进行统计调研，统计下处理方式

结果：404 302 200 


## 结果分类

（1）正常站点：状态码200/302/404，且错误页面及主页的状态码2xx

（2）死站：请求失败或者状态码5xx，且错误页面及主页的状态码或title内容一样

（3）异常站点：状态码403


## 主逻辑

流程：访问不存在的资源，响应正常，再请求根目录，根据每个分支不同的状态码进行分类

分类：正常网站、受限网站、非正常网站、不是网站

总共有如下分支

不存在资源请求：
 
 1）正常网站：200/302/404
 
 2）400 请求报文错误，可能的是协议不对

 3）受限网站：401、407、415

 4）非正常网站：403、405、5xx等其他状态码

 5）不是网站：请求失败


根目录资源请求：

 1）正常网站：200/302
 
 2）400 请求报文错误，可能的是协议不对

 3）受限网站：401、407、415

 4）非正常网站：403、404、405、5xx等其他状态码

 5）不是网站：请求失败


## 代码结构

- SubDomainSiteScan.py        主函数，入参：子域名列表，返回：无

- util/getStatusAndTtile.py   发送请求，获取状态码及title，入参：url，返回：列表【url，status，title】

- util/getRandomUrl.py        生成随机资源url，不存在的资源url，入参：子域名，返回：随机

- urlutil/report.py           输出报告文件，入参：报告文件名，数据列表【url，status，title】，返回：无

- lib/cmdline.py              解析命令行参数

- report                      报告目录